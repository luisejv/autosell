<div
  class="section-title-page area-bg area-bg_dark area-bg_op_60"
  [ngStyle]="{ 'margin-top': '0px' }"
>
  >
  <div class="area-bg__inner">
    <div class="container text-center">
      <h1 class="b-title-page">{{ title }}</h1>
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a routerLink="/dashboard">Dashboard</a>
          </li>
          <li class="breadcrumb-item active" aria-current="page">
            {{ title }}
          </li>
        </ol>
      </nav>
    </div>
  </div>
</div>

<div class="l-main-content">
  <!-- <div class="ui-decor ui-decor_mirror bg-primary"></div> -->
  <div class="container-fluid">
    <div class="row justify-content-center">
      <div
        class="col-3"
        [ngClass]="{
          'col-5':
            commonService.screenWidth >= 900 &&
            commonService.screenWidth < 1400,
          'd-none': commonService.screenWidth < 900
        }"
      >
        <div class="b-booking-nav">
          <a
            class="b-booking-nav__item"
            (click)="changeStep(1)"
            [ngClass]="{ active: step1 }"
          >
            <div class="b-booking-nav__header">Paso 1</div>
            <div class="b-booking-nav__main">
              <img
                src="assets/media/general/register/propietario.svg"
                height="40"
                width="40"
                alt=""
                class="ic"
              />
              <!-- <i class="ic fas fa-car-side"></i> -->
              <span class="b-booking-nav__title">Datos del propietario</span>
            </div>
          </a>
          <a
            class="b-booking-nav__item"
            (click)="changeStep(2)"
            [ngClass]="{ active: step2 }"
          >
            <div class="b-booking-nav__header">Paso 2</div>
            <div class="b-booking-nav__main">
              <img
                src="assets/media/general/register/datos.svg"
                height="40"
                width="40"
                alt=""
                class="ic"
              />
              <!-- <i class="ic fas fa-cubes"></i> -->
              <span class="b-booking-nav__title">Datos Generales</span>
            </div>
          </a>
          <a
            class="b-booking-nav__item"
            (click)="changeStep(3)"
            [ngClass]="{ active: step3 }"
          >
            <div class="b-booking-nav__header">Paso 3</div>
            <div class="b-booking-nav__main">
              <img
                src="assets/media/general/register/tecnicos.svg"
                height="40"
                width="40"
                alt=""
                class="ic"
              />
              <!-- <i class="ic fas fa-cog"></i> -->
              <span class="b-booking-nav__title">Datos Técnicos</span>
            </div>
          </a>
          <a
            class="b-booking-nav__item"
            (click)="changeStep(4)"
            [ngClass]="{ active: step4 }"
          >
            <div class="b-booking-nav__header">Paso 4</div>
            <div class="b-booking-nav__main">
              <img
                src="assets/media/general/register/tecnicos.svg"
                height="40"
                width="40"
                alt=""
                class="ic"
              />
              <!-- <i class="ic far fa-calendar"></i> -->
              <span class="b-booking-nav__title">Accesorios</span>
            </div>
          </a>
          <a
            class="b-booking-nav__item"
            (click)="changeStep(5)"
            [ngClass]="{ active: step5 }"
          >
            <div class="b-booking-nav__header">Paso 5</div>
            <div class="b-booking-nav__main">
              <img
                src="assets/media/general/register/fotos.svg"
                height="40"
                width="40"
                alt=""
                class="ic"
              />
              <!-- <i class="ic far fa-calendar"></i> -->
              <span class="b-booking-nav__title">Cargar Imágenes</span>
            </div>
          </a>
        </div>
      </div>
      <div
        class="col-6 pt-5"
        [ngClass]="{
          'col-10': commonService.screenWidth < 900
        }"
      >
        <nav aria-label="breadcrumb" class="newBreadcrumb">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a routerLink="/dashboard">Dashboard</a>
            </li>
            <li
              class="breadcrumb-item active text-secondary"
              aria-current="page"
            >
              {{ title }}
            </li>
          </ol>
        </nav>
        <ng-template [ngIf]="commonService.screenWidth < 900">
          <mat-horizontal-stepper
            labelPosition="bottom"
            #stepper
            class="formMobile"
          >
            <ng-template matStepperIcon="edit">
              <mat-icon>edit</mat-icon>
            </ng-template>
            <form [formGroup]="formGroup">
              <mat-step>
                <h2>Datos del propietario del vehículo</h2>
                <mat-form-field appearance="outline" class="w-100 mt-3">
                  <mat-label>DNI Dueño</mat-label>
                  <input
                    matInput
                    type="text"
                    formControlName="dniDueno"
                    mask="00000000"
                  />
                  <mat-error
                    *ngIf="formGroup.get('dniDueno')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Nombres Dueño</mat-label>
                  <input matInput type="text" formControlName="nombreDueno" />
                  <!-- <mat-error *ngIf="formGroup.get('nombreDueno')?.errors?.required">
                  Este campo es obligatorio.
                </mat-error> -->
                  <mat-error
                    *ngIf="formGroup.get('nombreDueno')?.errors?.required"
                  >
                    Primero, debes buscar el dni.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Correo Dueño</mat-label>
                  <input matInput type="email" formControlName="correoDueno" />
                  <mat-error
                    *ngIf="formGroup.get('correoDueno')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Teléfono Dueño</mat-label>
                  <input
                    matInput
                    type="text"
                    mask="000 000 000"
                    formControlName="telefonoDueno"
                  />
                  <mat-error
                    *ngIf="formGroup.get('telefonoDueno')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <div class="row justify-content-around mt-3">
                  <button mat-raised-button matStepperNext class="continuar">
                    Continuar
                  </button>
                </div>
              </mat-step>
              <mat-step>
                <h2>Datos generales de tu vehículo</h2>
                <mat-form-field appearance="outline" class="w-100 mt-3">
                  <mat-label>Carrocería</mat-label>
                  <mat-select formControlName="tipoCarroceria">
                    <mat-option
                      *ngFor="let carroceria of dataService.tiposCarroceria"
                      [value]="carroceria"
                    >
                      {{ carroceria }}
                    </mat-option>
                  </mat-select>
                  <mat-error
                    *ngIf="formGroup.get('tipoCarroceria')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Placa</mat-label>
                  <input
                    maxlength="7"
                    matInput
                    type="text"
                    formControlName="placa"
                    mask="AAA-AAA"
                  />
                  <mat-error *ngIf="formGroup.get('placa')?.errors?.required">
                    Este campo es obligatorio.
                  </mat-error>
                  <mat-error
                    *ngIf="
                      formGroup.get('placa')?.errors?.minLength ||
                      formGroup.get('placa')?.errors?.maxLength
                    "
                  >
                    Debe ingresar una placa válida.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>VIN</mat-label>
                  <input matInput type="text" formControlName="serie" />
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Marca</mat-label>
                  <input matInput type="text" formControlName="marca" />
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Modelo</mat-label>
                  <input matInput type="text" formControlName="modelo" />
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Año Fabricación</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="anoFabricacion"
                  />
                  <mat-error
                    *ngIf="formGroup.get('anoFabricacion')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                  <mat-error
                    *ngIf="formGroup.get('anoFabricacion')?.errors?.min"
                  >
                    No pueden venderse autos fabricados antes de 1999.
                  </mat-error>
                  <mat-error
                    *ngIf="
                      formGroup.get('anoFabricacion')?.errors?.max ||
                      formGroup.get('anoFabricacion')?.errors?.maxlength
                    "
                  >
                    Debe ingresar un año válido.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Color</mat-label>
                  <input matInput type="text" formControlName="color" />
                  <mat-error *ngIf="formGroup.get('color')?.errors?.required">
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <div class="row mt-3 justify-content-around">
                  <button mat-raised-button color="none" matStepperPrevious>
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    class="continuar"
                    matStepperNext
                  >
                    Continuar
                  </button>
                </div>
              </mat-step>
              <mat-step>
                <h2>Características técnicas de tu vehículo</h2>
                <mat-form-field appearance="outline" class="w-100 mt-3">
                  <mat-label>Tipo de Transmisión</mat-label>
                  <mat-select formControlName="tipoCambios">
                    <mat-option
                      *ngFor="let cambios of dataService.tiposTransmision"
                      [value]="cambios"
                    >
                      {{ cambios }}
                    </mat-option>
                  </mat-select>
                  <mat-error
                    *ngIf="formGroup.get('tipoCambios')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Combustible</mat-label>
                  <mat-select formControlName="tipoCombustible">
                    <mat-option
                      *ngFor="let combustible of dataService.tiposCombustible"
                      [value]="combustible"
                    >
                      {{ combustible }}
                    </mat-option>
                  </mat-select>
                  <mat-error
                    *ngIf="formGroup.get('tipoCombustible')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Motor (CC)</mat-label>
                  <input
                    matInput
                    type="text"
                    placeholder="Ejemplo: 2500"
                    formControlName="cilindrada"
                  />
                  <mat-error
                    *ngIf="formGroup.get('cilindrada')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                  <mat-error
                    *ngIf="
                      formGroup.get('cilindrada')?.errors?.min ||
                      formGroup.get('cilindrada')?.errors?.max
                    "
                  >
                    Debes ingresar un número de clindrada válido (800-6000cc).
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Kilometraje</mat-label>
                  <input
                    matInput
                    type="text"
                    formControlName="kilometraje"
                    [OnlyNumber]="true"
                    mask="separator.2"
                    thousandSeparator=","
                  />
                  <mat-error
                    *ngIf="formGroup.get('kilometraje')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Nº Puertas</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="numeroPuertas"
                  />
                  <mat-error
                    *ngIf="formGroup.get('numeroPuertas')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Tracción</mat-label>
                  <mat-select formControlName="tipoTraccion">
                    <mat-option
                      *ngFor="let traccion of dataService.tiposTracciones"
                      [value]="traccion"
                    >
                      {{ traccion }}
                    </mat-option>
                  </mat-select>
                  <mat-error
                    *ngIf="formGroup.get('tipoTraccion')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Nº Cilindros</mat-label>
                  <input
                    matInput
                    type="number"
                    min="0"
                    formControlName="numeroCilindros"
                  />
                  <mat-error
                    *ngIf="formGroup.get('numeroCilindros')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                  <mat-error
                    *ngIf="
                      formGroup.get('numeroCilindros')?.errors?.min ||
                      formGroup.get('numeroCilindros')?.errors?.max
                    "
                  >
                    Debes ingresar un número válido de cilindros.
                  </mat-error>
                </mat-form-field>
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Precio Venta (US$)</mat-label>
                  <input
                    matInput
                    type="text"
                    formControlName="precioVenta"
                    [OnlyNumber]="true"
                    mask="separator.2"
                    thousandSeparator=","
                  />
                  <mat-error
                    *ngIf="formGroup.get('precioVenta')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </mat-form-field>
                <div class="row mt-3 justify-content-around">
                  <button mat-raised-button color="none" matStepperPrevious>
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    class="continuar"
                    matStepperNext
                  >
                    Continuar
                  </button>
                </div>
              </mat-step>
              <mat-step>
                <h2>Agrega los accesorios de tu vehículo</h2>
                <div class="container my-3">
                  <!-- {{ accesorios | json }}
                <hr />
                {{ formGroup.value | json }}
                <hr /> -->
                  <div class="container">
                    <div class="row">
                      <div
                        *ngFor="let tipo of tiposAccesorios"
                        class="col-xl-6 col-lg-12 col-md-12"
                      >
                        <h3>{{ tipo }}</h3>
                        <ul>
                          <li
                            *ngFor="let accesorio of getAccesoriosOfTipo(tipo)"
                          >
                            <mat-checkbox
                              color="primary"
                              [(ngModel)]="accesorio.selected"
                              [ngModelOptions]="{ standalone: true }"
                            >
                              {{ accesorio.nombre }}
                            </mat-checkbox>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <mat-error
                    *ngIf="formGroup.get('accesorios')?.errors?.required"
                  >
                    Este campo es obligatorio.
                  </mat-error>
                </div>
                <div class="row mt-3 justify-content-around">
                  <button mat-raised-button color="none" matStepperPrevious>
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    class="continuar"
                    matStepperNext
                  >
                    Continuar
                  </button>
                </div>
              </mat-step>
              <mat-step>
                <h2>Sube las fotos de tu vehículo</h2>
                <p class="mt-3">
                  Agrega tus fotos aquí,
                  <strong
                    >la primera será la que aparecerá en toda la aplicación como
                    principal</strong
                  >. Puedes reordenar las fotos que has subido a tu gusto
                  jalándolas y soltándolas. Está permitido un máximo de 15
                  fotos.
                </p>
                <div class="row mt-3 justify-content-center">
                  <div
                    cdkDropList
                    cdkDropListOrientation="horizontal"
                    class="example-list"
                    (cdkDropListDropped)="drop($event)"
                  >
                    <div
                      class="example-box"
                      *ngFor="let foto of fotos; let i = index"
                      cdkDrag
                    >
                      <div class="image-upload text-center">
                        <label [for]="'upload' + i" class="photo text-center">
                          <img
                            [src]="
                              foto.src
                                ? foto.src
                                : 'assets/media/general/upload.jpg'
                            "
                            class="img-fluid"
                            alt=""
                          />
                        </label>
                        <input
                          type="file"
                          accept="image/*"
                          [id]="'upload' + i"
                          (change)="onImageChange($event, i)"
                        />
                        <button
                          mat-mini-fab
                          color="none"
                          (click)="removePhoto(i)"
                          style="outline: none"
                        >
                          <mat-icon>close</mat-icon>
                        </button>
                      </div>
                    </div>
                    <div
                      class="example-box"
                      *ngIf="fotos.length < 15 && update"
                    >
                      <button
                        mat-fab
                        color="none"
                        style="outline: none"
                        (click)="addPhoto()"
                      >
                        <mat-icon>add</mat-icon>
                      </button>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <mat-form-field appearance="outline" class="w-100 mt-3">
                    <mat-label>Descripción</mat-label>
                    <textarea matInput formControlName="descripcion"></textarea>
                  </mat-form-field>
                </div>
                <div class="row">
                  <mat-form-field appearance="outline" class="w-100">
                    <mat-label>Etiqueta para venta</mat-label>
                    <textarea matInput formControlName="tag"></textarea>
                  </mat-form-field>
                </div>
                <div class="row mt-3 justify-content-around">
                  <button mat-raised-button color="none" matStepperPrevious>
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    type="button"
                    (click)="submitActionWrapper()"
                  >
                    {{ submitButtonText }}
                  </button>
                </div>
              </mat-step>
            </form>
          </mat-horizontal-stepper>
        </ng-template>
        <ng-template [ngIf]="commonService.screenWidth >= 900">
          <form [formGroup]="formGroup">
            <div [hidden]="!step1">
              <h2>Datos del propietario del vehículo</h2>
              <mat-form-field appearance="outline" class="w-100 mt-5">
                <mat-label>DNI Dueño</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="dniDueno"
                  mask="00000000"
                />
                <mat-error *ngIf="formGroup.get('dniDueno')?.errors?.required">
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Nombres Dueño</mat-label>
                <input matInput type="text" formControlName="nombreDueno" />
                <mat-error
                  *ngIf="formGroup.get('nombreDueno')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Correo Dueño</mat-label>
                <input matInput type="email" formControlName="correoDueno" />
                <mat-error
                  *ngIf="formGroup.get('correoDueno')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Teléfono Dueño</mat-label>
                <input
                  matInput
                  type="text"
                  mask="000 000 000"
                  formControlName="telefonoDueno"
                />
                <mat-error
                  *ngIf="formGroup.get('telefonoDueno')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <div class="container mt-2 py-3">
                <div class="row justify-content-around">
                  <button
                    mat-raised-button
                    color="primary"
                    class="continuar"
                    type="button"
                    (click)="changeStep(2)"
                  >
                    Continuar
                  </button>
                </div>
              </div>
            </div>
            <div [hidden]="!step2">
              <h2>Datos generales de tu vehículo</h2>
              <mat-form-field appearance="outline" class="w-100 mt-5">
                <mat-label>Carrocería</mat-label>
                <mat-select formControlName="tipoCarroceria">
                  <mat-option
                    *ngFor="let carroceria of dataService.tiposCarroceria"
                    [value]="carroceria"
                  >
                    {{ carroceria }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="formGroup.get('tipoCarroceria')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Placa</mat-label>
                <input
                  maxlength="7"
                  matInput
                  type="text"
                  formControlName="placa"
                  mask="AAA-AAA"
                />
                <mat-error *ngIf="formGroup.get('placa')?.errors?.required">
                  Este campo es obligatorio.
                </mat-error>
                <mat-error
                  *ngIf="
                    formGroup.get('placa')?.errors?.minLength ||
                    formGroup.get('placa')?.errors?.maxLength
                  "
                >
                  Debe ingresar una placa válida.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>VIN</mat-label>
                <input matInput type="text" formControlName="serie" />
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Marca</mat-label>
                <input matInput type="text" formControlName="marca" />
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Modelo</mat-label>
                <input matInput type="text" formControlName="modelo" />
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Año Fabricación</mat-label>
                <input
                  matInput
                  type="number"
                  formControlName="anoFabricacion"
                />
                <mat-error
                  *ngIf="formGroup.get('anoFabricacion')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
                <mat-error *ngIf="formGroup.get('anoFabricacion')?.errors?.min">
                  No pueden venderse autos fabricados antes de 1999.
                </mat-error>
                <mat-error
                  *ngIf="
                    formGroup.get('anoFabricacion')?.errors?.max ||
                    formGroup.get('anoFabricacion')?.errors?.maxlength
                  "
                >
                  Debe ingresar un año válido.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Color</mat-label>
                <input matInput type="text" formControlName="color" />
                <mat-error *ngIf="formGroup.get('color')?.errors?.required">
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <div class="container mt-2 py-3">
                <div class="row justify-content-around">
                  <button
                    mat-raised-button
                    color="none"
                    type="button"
                    (click)="changeStep(1)"
                  >
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    type="button"
                    class="continuar"
                    (click)="changeStep(3)"
                  >
                    Continuar
                  </button>
                </div>
              </div>
            </div>
            <div [hidden]="!step3">
              <h2>Características técnicas de tu vehículo</h2>
              <mat-form-field appearance="outline" class="w-100 mt-5">
                <mat-label>Tipo de Transmisión</mat-label>
                <mat-select formControlName="tipoCambios">
                  <mat-option
                    *ngFor="let cambios of dataService.tiposTransmision"
                    [value]="cambios"
                  >
                    {{ cambios }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="formGroup.get('tipoCambios')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Combustible</mat-label>
                <mat-select formControlName="tipoCombustible">
                  <mat-option
                    *ngFor="let combustible of dataService.tiposCombustible"
                    [value]="combustible"
                  >
                    {{ combustible }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="formGroup.get('tipoCombustible')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Motor (CC)</mat-label>
                <input
                  matInput
                  type="text"
                  placeholder="Ejemplo: 2500"
                  formControlName="cilindrada"
                />
                <mat-error
                  *ngIf="formGroup.get('cilindrada')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
                <mat-error
                  *ngIf="
                    formGroup.get('cilindrada')?.errors?.min ||
                    formGroup.get('cilindrada')?.errors?.max
                  "
                >
                  Debes ingresar un número de cilindrada válido (800 - 6000cc).
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Kilometraje</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="kilometraje"
                  mask="separator.2"
                  thousandSeparator=","
                  [OnlyNumber]="true"
                />
                <mat-error
                  *ngIf="formGroup.get('kilometraje')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Nº Puertas</mat-label>
                <input matInput type="number" formControlName="numeroPuertas" />
                <mat-error
                  *ngIf="formGroup.get('numeroPuertas')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Tracción</mat-label>
                <mat-select formControlName="tipoTraccion">
                  <mat-option
                    *ngFor="let traccion of dataService.tiposTracciones"
                    [value]="traccion"
                  >
                    {{ traccion }}
                  </mat-option>
                </mat-select>
                <mat-error
                  *ngIf="formGroup.get('tipoTraccion')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Nº Cilindros</mat-label>
                <input
                  matInput
                  type="number"
                  min="0"
                  formControlName="numeroCilindros"
                />
                <mat-error
                  *ngIf="formGroup.get('numeroCilindros')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
                <mat-error
                  *ngIf="
                    formGroup.get('numeroCilindros')?.errors?.min ||
                    formGroup.get('numeroCilindros')?.errors?.max
                  "
                >
                  Debes ingresar un número válido de cilindros.
                </mat-error>
              </mat-form-field>
              <mat-form-field appearance="outline" class="w-100">
                <mat-label>Precio Venta (US$)</mat-label>
                <input
                  matInput
                  type="text"
                  formControlName="precioVenta"
                  [OnlyNumber]="true"
                  mask="separator.2"
                  thousandSeparator=","
                />
                <mat-error
                  *ngIf="formGroup.get('precioVenta')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </mat-form-field>
              <div class="container mt-2 py-3">
                <div class="row justify-content-around">
                  <button
                    mat-raised-button
                    color="none"
                    type="button"
                    (click)="changeStep(2)"
                  >
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    type="button"
                    class="continuar"
                    (click)="changeStep(4)"
                  >
                    Continuar
                  </button>
                </div>
              </div>
            </div>
            <div [hidden]="!step4">
              <h2>Agrega los accesorios de tu vehículo</h2>
              <div class="container my-3">
                <!-- {{ accesorios | json }}
                <hr />
                {{ formGroup.value | json }}
                <hr /> -->
                <div class="container">
                  <div class="row">
                    <div
                      *ngFor="let tipo of tiposAccesorios"
                      class="col-xl-6 col-lg-12 col-md-12"
                    >
                      <h3>{{ tipo }}</h3>
                      <ul>
                        <li *ngFor="let accesorio of getAccesoriosOfTipo(tipo)">
                          <mat-checkbox
                            color="primary"
                            [(ngModel)]="accesorio.selected"
                            [ngModelOptions]="{ standalone: true }"
                          >
                            {{ accesorio.nombre }}
                          </mat-checkbox>
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <mat-error
                  *ngIf="formGroup.get('accesorios')?.errors?.required"
                >
                  Este campo es obligatorio.
                </mat-error>
              </div>
              <div class="container mt-2 py-3">
                <div class="row justify-content-around">
                  <button
                    mat-raised-button
                    color="none"
                    type="button"
                    (click)="changeStep(3)"
                  >
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    type="button"
                    class="continuar"
                    (click)="changeStep(5)"
                  >
                    Continuar
                  </button>
                </div>
              </div>
            </div>
            <div [hidden]="!step5">
              <h2>Sube las fotos de tu vehículo</h2>
              <p>
                Agrega tus fotos aquí,
                <strong
                  >la primera será la que aparecerá en toda la aplicación como
                  principal</strong
                >. Puedes reordenar las fotos que has subido a tu gusto
                jalándolas y soltándolas. Está permitido un máximo de 15 fotos.
              </p>
              <div class="row mt-5 justify-content-center">
                <div
                  cdkDropList
                  cdkDropListOrientation="horizontal"
                  class="example-list"
                  (cdkDropListDropped)="drop($event)"
                >
                  <div
                    class="example-box"
                    *ngFor="let foto of fotos; let i = index"
                    cdkDrag
                  >
                    <div class="image-upload text-center">
                      <label [for]="'upload' + i" class="photo text-center">
                        <img
                          [src]="
                            foto.src
                              ? foto.src
                              : 'assets/media/general/upload.jpg'
                          "
                          class="img-fluid"
                          alt=""
                        />
                      </label>
                      <input
                        type="file"
                        accept="image/*"
                        [id]="'upload' + i"
                        (change)="onImageChange($event, i)"
                      />
                      <button
                        mat-mini-fab
                        color="none"
                        (click)="removePhoto(i)"
                        style="outline: none"
                      >
                        <mat-icon>close</mat-icon>
                      </button>
                    </div>
                  </div>
                  <div class="example-box" *ngIf="fotos.length < 15 && update">
                    <button
                      mat-fab
                      color="none"
                      style="outline: none"
                      (click)="addPhoto()"
                    >
                      <mat-icon>add</mat-icon>
                    </button>
                  </div>
                </div>
              </div>
              <div class="row">
                <mat-form-field appearance="outline" class="w-100 mt-3">
                  <mat-label>Descripción</mat-label>
                  <textarea matInput formControlName="descripcion"></textarea>
                </mat-form-field>
              </div>
              <div class="row">
                <mat-form-field appearance="outline" class="w-100">
                  <mat-label>Etiqueta para venta</mat-label>
                  <textarea matInput formControlName="tag"></textarea>
                </mat-form-field>
              </div>
              <div class="container mt-2 py-3">
                <div class="row justify-content-around">
                  <button
                    mat-raised-button
                    color="none"
                    type="button"
                    (click)="changeStep(4)"
                  >
                    Anterior
                  </button>
                  <button
                    mat-raised-button
                    color="primary"
                    class="continuar mt-2"
                    type="button"
                    (click)="submitActionWrapper()"
                  >
                    {{ submitButtonText }}
                  </button>
                </div>
              </div>
            </div>
          </form>
        </ng-template>
      </div>
    </div>
  </div>
</div>
